Tool: gmail
Package: @kazibee/gmail

Use this tool for Gmail operations. Prefer precise calls with explicit limits, query filters, and message IDs.

Auth requirements
- CLIENT_ID
- CLIENT_SECRET
- REFRESH_TOKEN
- If auth fails, instruct user to run: kazibee gmail login
- For Drive-file attachments, login must include Drive readonly scope.

Typical intents to map
- "latest emails" -> list messages with max results and optional query
- "read this email" -> get message by ID
- "send email" -> send message with to/subject/body
- "send with local attachments" -> sendMessageWithAttachments(...)
- "send with Google Drive file IDs" -> sendMessageWithDriveAttachments(...)
- "save draft" -> createDraft or attachment-aware draft methods
- "download attachment" -> listAttachments + downloadAttachment/downloadAttachmentPart
- "labels" -> list labels, add/remove labels
- "filters" -> list/create/delete filters

Examples
- "List my 20 latest unread emails from the inbox."
- "Find emails from billing@company.com in the last 7 days."
- "Get message 18c7f0... and summarize it."
- "Send this with files attached from /tmp."
- "Send this with Drive files 1abc.. and 1def.. attached."
- "Download all attachments from message 18c7f0..."

Code call examples
```ts
const msgs = await tools["gmail"].listMessages("is:unread in:inbox", 20);
const msg = await tools["gmail"].getMessage("18c7f0abc123");

const sent = await tools["gmail"].sendMessage(
  "alice@example.com",
  "Project Update",
  "Quick status: on track for Friday."
);

const sentWithLocalFiles = await tools["gmail"].sendMessageWithAttachments(
  "ops@example.com",
  "Weekly Report",
  "See attachments.",
  [
    { path: "/tmp/report.pdf" },
    { path: "/tmp/export.csv", filename: "metrics.csv", mimeType: "text/csv" }
  ]
);

const sentWithDriveFiles = await tools["gmail"].sendMessageWithDriveAttachments(
  "ops@example.com",
  "Drive Attachments",
  "Attached directly from Drive.",
  [
    { fileId: "1abcDriveFileId" },
    { fileId: "1defDriveFileId", filename: "renamed.pdf" }
  ]
);

const draftWithDrive = await tools["gmail"].createDraftWithDriveAttachments(
  "ops@example.com",
  "Draft With Drive Files",
  "Please review.",
  [{ fileId: "1abcDriveFileId" }]
);

const attachmentParts = await tools["gmail"].listAttachments("18c7f0abc123");
await tools["gmail"].downloadAttachmentPart(
  "18c7f0abc123",
  attachmentParts[0].partId,
  "/tmp/attachment.bin"
);

const filters = await tools["gmail"].listFilters();
const createdFilter = await tools["gmail"].createFilter(
  { from: "billing@company.com", hasAttachment: true },
  { addLabelIds: ["IMPORTANT"], removeLabelIds: ["INBOX"] }
);
await tools["gmail"].deleteFilter(createdFilter.id);
```

Output behavior
- Return concise structured results.
- Include message IDs when listing messages so follow-up actions can target them.
- On write actions, confirm success with the returned ID/state.
- For attachment operations, include filenames/IDs and output paths.
